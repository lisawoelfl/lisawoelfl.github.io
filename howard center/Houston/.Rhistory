city_2020 <- butte_2020 %>%
count(city)
write_csv(city_2020, "city_2020.csv")
city_2021 <- butte_2021 %>%
count(city)
write_csv(city_2021, "city_2021.csv")
city_2022 <- butte_2022 %>%
count(city)
write_csv(city_2022, "city_2022.csv")
city_2018
butte_2018
city_2018 <- butte_2018 %>%
count(zip)
write_csv(city_2018, "city_2018.csv")
city_2018
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(lubridate)
library(stringr)
library(dplyr)
library(tidyr)
lapd_calls <- read_csv("lapd_calls.csv") %>% clean_names()
lapd_calls <- read_csv("lapd_calls.csv") %>% clean_names()
lapd_calls
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(lubridate)
library(stringr)
library(dplyr)
library(tidyr)
bike_crashes <- read_csv("data/Maryland_Statewide_Vehicle_Crashes.csv") %>% clean_names()
bike_crashes
clean_bike_crashes <- bike_crashes %>%
group_by(report_type) %>%
count(year)
clean_bike_crashes
write_csv(clean_bike_crashes, "data/clean_bike_crashes.csv")
View(bike_crashes)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lubridate)
library(ggplot2)
library(stringr)
calls_2021 <- read_csv("data/911_Calls_for_Service_2021_.csv") %>% clean_names
library(tidyverse)
library(janitor)
library(lubridate)
library(stringr)
library(dplyr)
library(tidyr)
calls_2021 <- read_csv("data/911_Calls_for_Service_2021_.csv") %>% clean_names
View(calls_2021)
calls_2021 %>%
group_by(description)
calls_2021 %>%
count(description)
calls_2021 <- read_csv("data/911_Calls_for_Service_2021_.csv") %>% clean_names
calls_2020 <- read_csv("data/911_Calls_for_Service_2020.csv") %>% clean_names
calls_2019 <- read_csv("data/911_Calls_for_Service_2019.csv") %>% clean_names
all_calls <- bind_rows(calls_2019, calls_2020, calls_2021)
write_csv(all_calls, "data/all_calls.csv")
View(all_calls)
all_calls %>%
filter(grepl('FAM', description)) %>%
group_by(description)
View(all_calls)
View(calls_2019)
View(calls_2019)
all_calls %>%
filter(grepl('FAM', description)) %>%
count(description)
all_calls %>%
filter(grepl('FAM', description)) %>%
count(description)
fam_all_calls <- all_calls %>%
filter(grepl('FAM DIS', description))
View(fam_all_calls)
fam_all_calls <- all_calls %>%
filter(grepl('FAMILY DIS', description))
all_calls %>%
filter(grepl('DAT|DOM'), description) %>%
count(description)
all_calls %>%
filter(grepl('DAT|DOM'), description)) %>%
all_calls %>%
filter(grepl('DAT|DOM'), description) %>%
count(description)
all_calls %>%
filter(grepl('DAT|DOM', description)) %>%
count(description)
fam_all_calls
fam_all_calls <- all_calls %>%
filter(grepl('FAMILY DIS', description)) %>%
mutate(date = floor_date(calldatetime, "day"))
fam_all_calls
fam_all_calls <- all_calls %>%
filter(grepl('FAMILY DIS', description)) %>%
mutate(date = as.Date(calldatetime, format = "%Y/%m/%d")) %>%
mutate(date = floor_date(calldatetime, "day"))
fam_all_calls <- all_calls %>%
filter(grepl('FAMILY DIS', description)) %>%
mutate(date = as.Date(calldatetime, format = "%Y/%m/%d"))
fam_all_calls
fam_all_calls <- all_calls %>%
filter(grepl('FAMILY DIS', description)) %>%
mutate(date = str_sub(calldatetime, 1, 10) %>%
mutate(date = as.Date(date, format = "%Y/%m/%d"))
fam_all_calls
fam_all_calls <- all_calls %>%
filter(grepl('FAMILY DIS', description)) %>%
mutate(date = str_sub(calldatetime, 1, 10) %>%
mutate(date = as.Date(date, format = "%Y/%m/%d"))
fam_all_calls
fam_all_calls
fam_all_calls <- all_calls %>%
filter(grepl('FAMILY DIS', description)) %>%
mutate(date = str_sub(calldatetime, 1, 10)) %>%
mutate(date = as.Date(date, format = "%Y/%m/%d"))
day_fam_calls <- fam_all_calls %>%
mutate(date = floor_date(occurred_date_time, "day")) %>%
count(date)
day_fam_calls <- fam_all_calls %>%
mutate(date = floor_date(date, "day")) %>%
count(date)
month_fam_calls <- fam_all_calls %>%
mutate(date = floor_date(date, "month")) %>%
count(date)
day_fam_calls
View(fam_all_calls)
View(calls_2019)
View(calls_2020)
View(calls_2021)
calls_2021 <- read_csv("data/911_Calls_for_Service_2021_.csv") %>% clean_names %>%
rename(calltimedate = call_date_time)
all_calls <- bind_rows(calls_2019, calls_2020, calls_2021)
write_csv(all_calls, "data/all_calls.csv")
fam_all_calls <- all_calls %>%
filter(grepl('FAMILY DIS', description)) %>%
mutate(date = str_sub(calldatetime, 1, 10)) %>%
mutate(date = as.Date(date, format = "%Y/%m/%d"))
day_fam_calls <- fam_all_calls %>%
mutate(date = floor_date(date, "day")) %>%
count(date)
day_fam_calls
View(calls_2021)
View(calls_2019)
calls_2021 <- read_csv("data/911_Calls_for_Service_2021_.csv") %>% clean_names %>%
rename(calldatetime = call_date_time)
all_calls <- bind_rows(calls_2019, calls_2020, calls_2021)
write_csv(all_calls, "data/all_calls.csv")
fam_all_calls <- all_calls %>%
filter(grepl('FAMILY DIS', description)) %>%
mutate(date = str_sub(calldatetime, 1, 10)) %>%
mutate(date = as.Date(date, format = "%Y/%m/%d"))
day_fam_calls <- fam_all_calls %>%
mutate(date = floor_date(date, "day")) %>%
count(date)
day_fam_calls
month_fam_calls <- fam_all_calls %>%
mutate(date = floor_date(date, "month")) %>%
count(date)
month_fam_calls
write_csv(month_fam_calls, "data/monthly_calls.csv")
write_csv(day_fam_calls, "data/daily_calls.csv")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(lubridate)
library(stringr)
library(dplyr)
library(tidyr)
calls_2021 <- read_csv("data/911_Calls_for_Service_2021_.csv") %>% clean_names %>%
rename(calldatetime = call_date_time)
calls_2020 <- read_csv("data/911_Calls_for_Service_2020.csv") %>% clean_names
calls_2019 <- read_csv("data/911_Calls_for_Service_2019.csv") %>% clean_names
all_calls <- bind_rows(calls_2019, calls_2020, calls_2021)
write_csv(all_calls, "data/all_calls.csv")
## Identified 68,000 calls of service possibly related to family violence
fam_all_calls <- all_calls %>%
filter(grepl('FAMILY DIS', description)) %>%
mutate(date = str_sub(calldatetime, 1, 10)) %>%
mutate(date = as.Date(date, format = "%Y/%m/%d"))
day_fam_calls <- fam_all_calls %>%
mutate(date = floor_date(date, "day")) %>%
count(date)
month_fam_calls <- fam_all_calls %>%
mutate(date = floor_date(date, "month")) %>%
count(date)
write_csv(month_fam_calls, "data/monthly_calls.csv")
write_csv(day_fam_calls, "data/daily_calls.csv")
fam_calls_19_20 <- fam_all_calls %>%
filter(grepl('2019|2020',date)) %>%
mutate(date = floor_date(date, "day")) %>%
count(date)
fam_calls_19_20
write_csv(fam_calls_19_20, "data/fam_calls_19_20.csv")
View(fam_calls_19_20)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(lubridate)
library(stringr)
library(dplyr)
library(tidyr)
library(stringr)
library(dplyr)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(lubridate)
library(stringr)
library(dplyr)
library(tidyr)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(lubridate)
library(stringr)
library(dplyr)
library(tidyr)
install.packages("gdata")
calls_botw <- "botw_hotline_dvsa_2019-2023m4_daily.xlsx"
calls_botw <- "botw_hotline_dvsa_2019-2023m4_daily.xlsx"
calls_botw <- read.xls(calls_botw, header = TRUE)
install.packages("gdata")
library(gdata)
calls_botw <- read.xls(calls_botw, header = TRUE)
install.packages("readxl")
install.packages("readxl")
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
calls_botw <- "botw_hotline_dvsa_2019-2023m4_daily.xlsx"
calls_botw <- read_excel(calls_botw, sheet=1)
View(calls_botw)
all_calls <- calls_botw %>%
select(date, number_of_calls) %>%
write.csv(all_calls, "all_calls.csv")
library(tidyverse)
library(janitor)
library(lubridate)
library(stringr)
library(dplyr)
library(tidyr)
library(readxl)
## Number of calls csv
all_calls <- calls_botw %>%
select(date, number_of_calls) %>%
write.csv(all_calls, "all_calls.csv")
all_calls <- calls_botw %>%
select(date, number_of_calls)
write.csv(all_calls, "all_calls.csv")
shelter_calls <- calls_botw %>%
select(date, cr__shelter_for_self)
write.csv(shelter_calls, "shelter_calls.csv")
shelter_calls
feb_shelter_calls <- shelter_calls %>%
filter((date >= 2019-02-10 & date <= 2019-02-19) | (date >= 2020-02-10 & date <= 2020-02-19) | (date >= 2021-02-10 & date <= 2021-02-19) | (date >= 2022-02-10 & date <= 2022-02-19) | (date >= 2023-02-10 & date <= 2023-02-19))
feb_shelter_calls
all_calls <- calls_botw %>%
select(date, number_of_calls) %>%
mutate(date = as.date(date, format = "%Y/%m/%d"))
all_calls <- calls_botw %>%
select(date, number_of_calls) %>%
mutate(date = as.Date(date, format = "%Y/%m/%d"))
calls_botw <- read_excel(calls_botw, sheet=1) %>%
mutate(date = as.Date(date, format = "%Y/%m/%d"))
calls_botw %>%
mutate(date = as.Date(date, format = "%Y/%m/%d"))
all_calls <- calls_botw %>%
select(date, number_of_calls)
shelter_calls <- calls_botw %>%
select(date, cr__shelter_for_self)
feb_shelter_calls <- shelter_calls %>%
filter((date >= 2019-02-10 & date <= 2019-02-19) | (date >= 2020-02-10 & date <= 2020-02-19) | (date >= 2021-02-10 & date <= 2021-02-19) | (date >= 2022-02-10 & date <= 2022-02-19) | (date >= 2023-02-10 & date <= 2023-02-19))
feb_shelter_calls
feb_shelter_calls <- shelter_calls %>%
filter(
(date >= "2019-02-10" & date <= "2019-02-19"))
feb_shelter_calls
feb_shelter_calls <- shelter_calls %>%
filter(
(date > "2019-02-09" & date <= "2019-02-19") |
(date > "2020-02-09" & date <= "2020-02-19") |
(date > "2021-02-09" & date <= "2021-02-19") |
(date > "2022-02-09" & date <= "2022-02-19") |
(date > "2023-02-09" & date <= "2023-02-19"))
feb_shelter_calls
feb_shelter_agg <- feb_shelter_calls %>%
mutate(2019 = filter(year = 2019))
feb_shelter_agg <- feb_shelter_calls %>%
mutate(c2019 = filter(year = 2019))
write.csv(feb_shelter_calls, "feb_shelter_calls.csv")
library(xlsx)
install.packages("xlsx")
library(xlsx)
write.xlsx(feb_shelter_calls, 'feb_agg.xlsx',
sheetName = "Sheet1")
feb_all_calls <- all_calls %>%
filter(
(date > "2019-02-09" & date <= "2019-02-19") |
(date > "2020-02-09" & date <= "2020-02-19") |
(date > "2021-02-09" & date <= "2021-02-19") |
(date > "2022-02-09" & date <= "2022-02-19") |
(date > "2023-02-09" & date <= "2023-02-19"))
write.xlsx(feb_all_calls, 'feb_agg_all.xlsx',
sheetName = "Sheet1")
calls_2021 <- all_calls %>%
filter(date > "2020-12-31" & date < 2022-01-01)
calls_2021 <- all_calls %>%
filter(date > "2020-12-31" & date < 2022-01-01)
calls_2021
calls_2021 <- all_calls %>%
filter(date > "2020-12-31" & date < "2022-01-01")
calls_2021
write_csv(calls_2021, "calls_2021.csv")
library(tidyverse)
library(janitor)
library(lubridate)
library(stringr)
library(dplyr)
library(tidyr)
library(readxl)
library(xlsx)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(lubridate)
library(stringr)
library(dplyr)
library(tidyr)
library(readxl)
library(xlsx)
## read and combine all files
x1 <- "excels/woefl1.xlsx" %>%
read_excel(sheet = 1) %>% clean_names()
## read and combine all files
x1 <- "excels/woefl1.xlsx" %>%
read_excel(sheet = 1) %>% clean_names()
x2 <- "excels/woefl2.xlsx" %>%
read_excel(sheet = 1) %>% clean_names()
x3 <- "excels/woefl3.xlsx" %>%
read_excel(sheet = 1) %>% clean_names()
x4 <- "excels/woefl4.xlsx" %>%
read_excel(sheet = 1) %>% clean_names()
## read and combine all files
x1 <- "excels/woefl1.xlsx" %>%
read_excel(sheet = 1) %>% clean_names()
x2 <- "excels/woefl2.xlsx" %>%
read_excel(sheet = 1) %>% clean_names()
x3 <- "excels/woefl3.xlsx" %>%
read_excel(sheet = 1) %>% clean_names()
x5 <- "excels/woefl5.xlsx" %>%
read_excel(sheet = 1) %>% clean_names()
x6 <- "excels/woefl6.xlsx" %>%
read_excel(sheet = 1) %>% clean_names()
x7 <- "excels/woefl7.xlsx" %>%
read_excel(sheet = 1) %>% clean_names()
houston_dv <- bind_rows(x1, x2, x3, x5, x6, x7)
houston_dv
x2 <- "excels/woefl2.xlsx" %>%
read_excel(sheet = 1) %>% clean_names() %>%
colnames(x2 <- c("incident", "date", "offense_type", "premise"))
View(x2)
x2 <- "excels/woefl2.xlsx" %>%
read_excel(sheet = 1) %>%
colnames(x2 <- c("incident", "date", "offense_type", "premise")) %>%
clean_names()
x2 <- "excels/woefl2.xlsx" %>%
read_excel(sheet = 1) %>%
set_names(x2 <- c("incident", "date", "offense_type", "premise")) %>%
clean_names()
x2
## read and combine all files
x1 <- "excels/woefl1.xlsx" %>%
read_excel(sheet = 1) %>% clean_names()
x2 <- "excels/woefl2.xlsx" %>%
read_excel(sheet = 1) %>%
set_names(x2 <- c("incident", "date", "offense_type", "premise")) %>%
clean_names()
x3 <- "excels/woefl3.xlsx" %>%
read_excel(sheet = 1) %>%
set_names(x3 <- c("incident", "date", "offense_type", "premise")) %>% clean_names()
x5 <- "excels/woefl5.xlsx" %>%
read_excel(sheet = 1) %>%
set_names(x5 <- c("incident", "date", "offense_type", "premise")) %>% clean_names()
x6 <- "excels/woefl6.xlsx" %>%
read_excel(sheet = 1) %>%
set_names(x6 <- c("incident", "date", "offense_type", "premise")) %>% clean_names()
x7 <- "excels/woefl7.xlsx" %>%
read_excel(sheet = 1) %>%
set_names(x7 <- c("incident", "date", "offense_type", "premise")) %>% clean_names()
houston_dv <- bind_rows(x1, x2, x3, x5, x6, x7)
houston_dv
View(houston_dv)
offense_type <- houston_dv %>%
count(offense_type)
offense_type
offense_type <- houston_dv %>%
count(offense_type) %>%
arrange(desc(n))
offense_type
houston_cfs <- bind_rows(x1, x2, x3, x5, x6, x7)
offense_type <- houston_cfs %>%
count(offense_type) %>%
arrange(desc(n))
offense_type
houston_cfs
houston_fv <- houston_cfs %>%
filter(grepl('Fam Viol' | 'Family Violence', offense_type)) %>%
mutate(date = as.Date(date, format = "%Y-%m-%d")) %>%
mutate(date = floor_date(date, "day")) %>%
count(date)
houston_fv <- houston_cfs %>%
filter(grepl('Fam Viol|Family Violence', offense_type)) %>%
mutate(date = as.Date(date, format = "%Y-%m-%d")) %>%
mutate(date = floor_date(date, "day")) %>%
count(date)
houston_fv
houston_cfs %>%
filter(grepl('Fam Viol|Family Violence', offense_type)) %>% +
filter(date = "2019-09-18")
houston_cfs <- bind_rows(x1, x2, x3, x5, x6, x7) %>%
mutate(date = as.Date(date, format = "%Y-%m-%d"))
houston_cfs %>%
filter(grepl('Fam Viol|Family Violence', offense_type)) %>% +
filter(date = "2019-09-18")
houston_cfs %>%
filter(grepl('Fam Viol|Family Violence', offense_type)) %>% +
filter(grepl('2019-09-18', date)
houston_cfs %>%
houston_cfs %>%
filter(grepl('Fam Viol|Family Violence', offense_type)) %>%
filter(grepl('2019-09-18', date))
x4 <- "excels/woefl4.xlsx" %>%
read_excel(sheet = 1) %>%
set_names(x4 <- c("incident", "date", "offense_type", "premise")) %>% clean_names()
houston_cfs <- bind_rows(x1, x2, x3, x4, x5, x6, x7) %>%
mutate(date = as.Date(date, format = "%Y-%m-%d"))
offense_type <- houston_cfs %>%
count(offense_type) %>%
arrange(desc(n))
houston_fv <- houston_cfs %>%
filter(grepl('Fam Viol|Family Violence', offense_type)) %>%
mutate(date = as.Date(date, format = "%Y-%m-%d")) %>%
mutate(date = floor_date(date, "day")) %>%
count(date)
houston_cfs %>%
filter(grepl('Fam Viol|Family Violence', offense_type)) %>%
filter(grepl('2019-09-18', date))
View(offense_type)
offense_type <- houston_cfs %>%
count(offense_type) %>%
arrange(desc(n))
houston_fv <- houston_cfs %>%
filter(grepl('Fam Viol|Family Violence|FamViol|FamViolence|Fam Member', offense_type)) %>%
mutate(date = as.Date(date, format = "%Y-%m-%d")) %>%
mutate(date = floor_date(date, "day")) %>%
count(date)
View(houston_fv)
houston_fv <- houston_cfs %>%
filter(grepl('Fam Viol|Family Violence|FamViol|FamViolence|Fam Member', offense_type))
houston_fv
View(houston_fv)
View(houston_dv)
houston_fv <- houston_cfs %>%
filter(grepl('*Fam Viol|*Family Violence|*FamViol|*FamViolence|*Fam Member', offense_type))
houston_fv
houston_fv <- houston_cfs %>%
filter(grepl('Fam Viol|Family Violence|FamViol|FamViolence|Fam Member', offense_type)) %>%
filter(!grepl('NotFamViol', offense_type))
View(houston_fv)
fv_day <- houston_fv %>%
mutate(date = floor_date(date, "day")) %>%
count(date)
fv_day
write_csv(fv_day, "family_violence_calls_daily")
write_csv(fv_day, "family_violence_calls_daily.csv")
fv_2021 <- houston_fv %>%
mutate(date = floor_date(date, "day")) %>%
filter(grepl('^2021', date)) %>%
count(date)
View(fv_2021)
write_csv(fv_2021, "family_violence_calls_2021.csv")
year <- as.numeric(format(date,'%Y'))
year
year <- as.numeric(format(houston_fv,'%Y'))
year <- as.numeric(format(x,'%Y'))
year <- as.numeric(format(houston_fv,'%Y'))
houston_fv <- houston_cfs %>%
filter(grepl('Fam Viol|Family Violence|FamViol|FamViolence|Fam Member', offense_type)) %>%
filter(!grepl('NotFamViol', offense_type)) %>%
mutate(year = as.numeric(format(Date, '%Y')))
houston_fv <- houston_cfs %>%
filter(grepl('Fam Viol|Family Violence|FamViol|FamViolence|Fam Member', offense_type)) %>%
filter(!grepl('NotFamViol', offense_type)) %>%
mutate(year = as.numeric(format(Date, '%Y')))
houston_fv <- houston_cfs %>%
filter(grepl('Fam Viol|Family Violence|FamViol|FamViolence|Fam Member', offense_type)) %>%
filter(!grepl('NotFamViol', offense_type)) %>%
mutate(year = as.numeric(format(date, '%Y')))
View(houston_fv)
houston_fv <- houston_cfs %>%
filter(grepl('Fam Viol|Family Violence|FamViol|FamViolence|Fam Member', offense_type)) %>%
filter(!grepl('NotFamViol', offense_type)) %>%
mutate(year = as.numeric(format(date, '%Y'))) %>%
mutate(month =as.numeric(format(date, '%m'))) %>%
mutate(day = as.numeric(format(date, '%d')))
install.packages("forecast")
